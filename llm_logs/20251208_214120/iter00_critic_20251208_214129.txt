================================================================================
CRITIC LLM LOG
Iteration: 0
Timestamp: 20251208_214129
================================================================================

--------------------------------------------------------------------------------
SYSTEM PROMPT
--------------------------------------------------------------------------------
You are a tactical analyst for turn-based RPG combat.

CRITICAL: Remember that the Behaviour Tree executes ONLY ONE action per turn. The BT cannot perform multiple actions in a single turn.

Your task is to analyze combat logs and identify:
- Elemental advantage usage (did they exploit weakness?)
- Resource efficiency (TP/MP management)
- Status effect timing
- Defensive decisions (Defend, Heal timing)
- Enemy pattern adaptation

Provide specific, actionable insights for BT improvement.

--------------------------------------------------------------------------------
USER PROMPT
--------------------------------------------------------------------------------
Analyze this combat and suggest BT improvements.

# Current Behaviour Tree
```
root :
    selector :
        # Heal when critical
        sequence :
            condition : IsPlayerHPLow(20)
            condition : CanHeal()
            task : Heal()
        
        # Default: Attack
        task : Attack()

```

# Recent Performance
Last 1 battles: 0 victories, 1 defeats
  LOSS vs FireGolem: 7 turns

# Combat Summary
=== COMBAT SUMMARY ===

Result: DEFEAT
Turns: 7
Final Player HP: 0/100 (0%)
Final Enemy HP: 150/180 (83%)

Enemy: FireGolem (Fire)
Weakness: Unknown (not scanned)

Resources Remaining: TP 100/100, MP 94/100


# Your Task

Analyze the combat and identify:

1. **Elemental Strategy**: Did they scan? Did they use the right spell?
2. **Resource Management**: TP/MP usage efficiency
3. **Defensive Decisions**: Heal/Defend timing
4. **BT Issues**: What parts of the tree caused problems?

Provide 3-5 specific improvement suggestions.

**IMPORTANT**: 
- Describe logic changes in plain text, NOT code
- Example: "Scan on turn 1 instead of turn 2"
- Example: "Increase heal threshold from 30% to 40%"

**Output Format:**
## Analysis
[What went wrong or could be better]

## Improvement Suggestions
1. [Logic change description]
2. [Logic change description]
3. [Logic change description]

Be concise and actionable.

--------------------------------------------------------------------------------
RESPONSE
--------------------------------------------------------------------------------
## Analysis
The combat against the FireGolem clearly demonstrates a failure to exploit the enemy’s elemental weakness. The BT defaults to a simple attack, ignoring the FireGolem’s vulnerability.  The player used all their MP on attacks, with no defensive actions taken. The lack of a scan and subsequent use of spells like “Water Blast” (which would have been effective against Fire) contributed significantly to the defeat. The Heal task was triggered, but it was too late - the player was already critically low on HP. The timing of the Heal was completely misaligned with the damage output.

## Improvement Suggestions
1.  **Implement Elemental Scanning:** Add a scan action that occurs on turn 1. This scan should identify the enemy's elemental type (Fire) and update the BT’s state.
2.  **Conditional Spell Selection:** Modify the BT so that *after* scanning, if the enemy is weak to the scanned element, the BT selects a corresponding spell (e.g., "Water Blast") instead of the default attack.
3.  **Dynamic Heal Threshold:**  Adjust the Heal trigger condition. Instead of simply checking for low HP (20%), introduce a secondary condition: “If the player’s HP is below 50% *and* the enemy’s attack dealt more than 20 damage this turn, then activate the Heal task.” This addresses the late healing.
4. **Defensive Action Consideration:** Introduce a “Defend” action that can be triggered if the enemy’s attack dealt more than 30 damage. This should be a lower priority than attacking, but crucial for survival.

================================================================================
Prompt length: 1333 chars
Response length: 1515 chars
================================================================================
