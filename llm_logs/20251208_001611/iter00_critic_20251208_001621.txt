================================================================================
CRITIC LLM LOG
Iteration: 0
Timestamp: 20251208_001621
================================================================================

--------------------------------------------------------------------------------
SYSTEM PROMPT
--------------------------------------------------------------------------------
You are a tactical analyst for turn-based RPG combat.

CRITICAL: Remember that the Behaviour Tree executes ONLY ONE action per turn. The BT cannot perform multiple actions in a single turn.

Your task is to analyze combat logs and identify:
- Elemental advantage usage (did they exploit weakness?)
- Resource efficiency (TP/MP management)
- Status effect timing
- Defensive decisions (Defend, Heal timing)
- Enemy pattern adaptation

Provide specific, actionable insights for BT improvement.

--------------------------------------------------------------------------------
USER PROMPT
--------------------------------------------------------------------------------
Analyze this combat and suggest BT improvements.

# Current Behaviour Tree
```
root :
    selector :
        # Heal when critical
        sequence :
            condition : IsPlayerHPLow(20)
            condition : CanHeal()
            task : Heal()
        
        # Default: Attack
        task : Attack()

```

# Recent Performance
Last 1 battles: 0 victories, 1 defeats
  LOSS vs FireGolem: 7 turns

# Combat Summary
=== COMBAT SUMMARY ===

Result: DEFEAT
Turns: 7
Final Player HP: 0/100 (0%)
Final Enemy HP: 150/180 (83%)

Enemy: FireGolem (Fire)
Weakness: Unknown (not scanned)

Resources Remaining: TP 100/100, MP 82/100


# Your Task

Analyze the combat and identify:

1. **Elemental Strategy**: Did they scan? Did they use the right spell?
2. **Resource Management**: TP/MP usage efficiency
3. **Defensive Decisions**: Heal/Defend timing
4. **BT Issues**: What parts of the tree caused problems?

Provide 3-5 specific improvement suggestions.

**IMPORTANT**: 
- Describe logic changes in plain text, NOT code
- Example: "Scan on turn 1 instead of turn 2"
- Example: "Increase heal threshold from 30% to 40%"

**Output Format:**
## Analysis
[What went wrong or could be better]

## Improvement Suggestions
1. [Logic change description]
2. [Logic change description]
3. [Logic change description]

Be concise and actionable.

--------------------------------------------------------------------------------
RESPONSE
--------------------------------------------------------------------------------
## Analysis
The player consistently failed to exploit the FireGolem’s elemental weakness to Fire. The single-action nature of the Behaviour Tree meant that even if a scan identified the weakness, the player was stuck with the default attack. The lack of a reactive strategy – specifically, using a Fire spell when the FireGolem was detected – resulted in prolonged damage and ultimately, defeat. The Heal task was triggered frequently, but without a corresponding offensive strategy, it was essentially wasted TP. The BT’s design doesn’t allow for adaptation based on enemy type or status.

## Improvement Suggestions
1.  **Implement Scanning:** Add a scan action that runs at the beginning of each turn. This scan should identify the enemy’s element and automatically select the appropriate spell (Fire spell) if it's a weakness.
2.  **Conditional Spell Selection:** Modify the BT so that if the scan reveals a weakness to Fire, the ‘Attack’ task is replaced with the ‘Fire Spell’ task.
3.  **Heal Threshold Adjustment:** Increase the heal threshold from 20% to 40%. This will allow for more proactive healing and prevent the player from being reduced to critical health before the BT can react.
4.  **Introduce a Defensive Priority:** Add a defensive priority node to the BT. If the player's HP drops below 50%, the BT should prioritize ‘Defend’ over ‘Attack’ for one turn to mitigate damage. This would require a separate 'Defend' task.

================================================================================
Prompt length: 1333 chars
Response length: 1439 chars
================================================================================
