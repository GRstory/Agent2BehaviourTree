================================================================================
CRITIC LLM LOG
Iteration: 3
Timestamp: 20251207_185906
================================================================================

--------------------------------------------------------------------------------
SYSTEM PROMPT
--------------------------------------------------------------------------------
You are a tactical analyst for turn-based RPG combat.

CRITICAL: Remember that the Behaviour Tree executes ONLY ONE action per turn. The BT cannot perform multiple actions in a single turn.

Your task is to analyze combat logs and identify:
- Elemental advantage usage (did they exploit weakness?)
- Resource efficiency (TP/MP management)
- Status effect timing
- Defensive decisions (Defend, Heal timing)
- Enemy pattern adaptation

Provide specific, actionable insights for BT improvement.

--------------------------------------------------------------------------------
USER PROMPT
--------------------------------------------------------------------------------
Analyze this combat and suggest BT improvements.

# Current Behaviour Tree
```
root :
    selector :
        # Initial Scan
        sequence :
            condition : IsTurnEarly(1)
            task : Scan()

        # Exploit Fire Weakness Immediately
        sequence :
            condition : HasScannedEnemy()
            condition : EnemyWeakTo(Fire)
            condition : HasMP(20)
            task : IceSpell()

        # Emergency Heal
        sequence :
            condition : IsPlayerHPLow(30)
            condition : CanHeal()
            task : Heal()

        # Defend against telegraphing
        sequence :
            condition : EnemyIsTelegraphing(HeavySlam)
            task : Defend()

        # Default: Attack
        task : Attack()
```

# Recent Performance
Last 3 battles: 0 victories, 3 defeats
  LOSS vs FireGolem: 4 turns
  LOSS vs FireGolem: 6 turns
  LOSS vs FireGolem: 5 turns

# Combat Summary
=== COMBAT SUMMARY ===

Result: DEFEAT
Turns: 5
Final Player HP: 0/100 (0%)
Final Enemy HP: 170/180 (94%)

Enemy: FireGolem (Fire)
Weakness: Ice (scanned)

Resources Remaining: TP 100/100, MP 82/100


# Your Task

Analyze the combat and identify:

1. **Elemental Strategy**: Did they scan? Did they use the right spell?
2. **Resource Management**: TP/MP usage efficiency
3. **Defensive Decisions**: Heal/Defend timing
4. **BT Issues**: What parts of the tree caused problems?

Provide 3-5 specific improvement suggestions.

**IMPORTANT**: 
- Describe logic changes in plain text, NOT code
- Example: "Scan on turn 1 instead of turn 2"
- Example: "Increase heal threshold from 30% to 40%"

**Output Format:**
## Analysis
[What went wrong or could be better]

## Improvement Suggestions
1. [Logic change description]
2. [Logic change description]
3. [Logic change description]

Be concise and actionable.

--------------------------------------------------------------------------------
RESPONSE
--------------------------------------------------------------------------------
## Analysis
The BT consistently prioritized immediate exploitation of the FireGolem's weakness with IceSpell, even when it wasn't the most efficient use of MP. The low MP pool (82/100) after the initial IceSpell likely contributed to the inability to react effectively when the enemy’s HP dropped. The BT’s rigid sequence of actions – scan, then IceSpell, then heal/defend – didn’t adapt to the evolving situation. The lack of a secondary attack option meant the player was entirely reliant on a single, potentially draining, spell. The 'Emergency Heal' triggered too late, coinciding with the enemy’s final burst of damage.

## Improvement Suggestions
1.  **Adaptive Scan Timing:** Implement a scan on turn 1 *and* every other turn (e.g., turns 1, 3, 5, etc.). This ensures the player is continuously assessing enemy weaknesses and resource availability.
2.  **MP Prioritization:** Modify the IceSpell task to have a cost limit (e.g., max 30 MP). If the MP pool drops below this threshold, the task should fail. This prevents the BT from depleting MP unnecessarily.
3.  **Heal Threshold Adjustment:** Increase the heal trigger from 30% HP to 50%. This allows for a more proactive healing strategy, preventing the player from reaching critical health before the 'Emergency Heal' activates.
4.  **Introduce a Secondary Attack:** Add a "Basic Attack" task to the root node. This provides a fallback option when IceSpell is unavailable or inefficient, and allows the player to conserve MP. This task should have a low MP cost.
5.  **Telegraphing Response Adjustment:** Instead of *always* Defend when HeavySlam is telegraphed, add a condition: "If EnemyIsTelegraphing(HeavySlam) AND EnemyHP > 70%, then Defend. Otherwise, Attack." This allows for more strategic defense when the enemy is vulnerable.

================================================================================
Prompt length: 1831 chars
Response length: 1796 chars
================================================================================
